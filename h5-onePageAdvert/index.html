<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>H5移动端页面</title>
    <link type="text/css" rel="stylesheet" href="css/reset.css" />
    <link type="text/css" rel="stylesheet" href="css/index.css" />
    <!--全屏看图样式-->
    <link rel="stylesheet" type="text/css" href="css/photoswipe.css"/>
    <!-- 解决移动端无法滑动 -->
    <script>
        window.PointerEvent = undefined
    </script>
</head>

<body>
    <marquee class="marquee-content" behavior="" direction="">我路过前端，原来前端是这么美妙，各式各样的东西都有，真的是缤纷多彩！</marquee>
    <div class="body-content" id="page">
        <div class="body-move" id="Gallery">
            <p class="title">
            	<span>技术分享——ES2017继发与并发！</span>
            </p>
            <p class="introduce">2017-10-24 <a href="javascript:void(0)">我路过的前端</a></p>
            <div class="explain">代码——是用来撸的，这就是情怀</div>
            <div class="bg-image"></div>
            <p class="describe-1">大家都知道，async函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用then方法指定下一步的操作。</p>
            <p class="describe-2">进一步说，async函数完全可以看作多个异步操作，包装成的一个 Promise 对象，而await命令就是内部then命令的语法糖。</p>
            <div class="desc-image">
                <span class="image-title">先来看一段代码</span>
                <a href="http://i2.bvimg.com/597584/89a69714f371a92f.png" class="desc-image-a">
                	<img src="http://i2.bvimg.com/597584/89a69714f371a92f.png" class="image specail" />
                </a>
            </div>
            <p class="decrible-3">函数f内部return命令返回的值</p>
            <p class="decrible-4">会被then方法回调函数接收到</p>
            <div class="desc-image">
                <a href="http://i2.bvimg.com/597584/95b3edb71ee48e0d.png" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/95b3edb71ee48e0d.png" class="image" />
                </a>
            </div>
            <p class="decrible-5">只有async函数内部的异步操作执行完</p>
            <p class="decrible-6">才会执行then方法指定的回调函数</p>
            <p class="decrible-7">wait后面要给个promise对象</p>
            <p class="decrible-8">也会返回promise对象</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/5ce814fcabffea15.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/5ce814fcabffea15.jpg" class="image" />
                </a>
            </div>
            <span class="image-title">需要注意的事</span>
            <p class="decrible-9">( 1 )</p>
            <p class="decrible-10">await命令后面的Promise对象</p>
            <p class="decrible-11">运行结果可能是rejected</p>
            <p class="decrible-12">所以最好把await命令放在try...catch代码块中</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/18b8be4ef075210b.png" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/18b8be4ef075210b.png" class="image" />
                </a>
            </div>
            <p class="decrible-13">( 2 )</p>
            <p class="decrible-14">多个await命令后面的异步操作</p>
            <p class="decrible-15">如果不存在继发关系</p>
            <p class="decrible-16">最好让他们同时触发</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/62b110ba3c283308.png" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/62b110ba3c283308.png" class="image" />
                </a>
            </div>
            <p class="decrible-17">( 3 )</p>
            <p class="decrible-18">await命令只能用在async函数之中</p>
            <p class="decrible-19">如果用在普通函数</p>
            <p class="decrible-20">就会报错</p>
			<span class="image-title">需要注意的事</span>
			<p class="decrible-21">先封装一个getData的函数</p>
            <p class="decrible-22">用来ajax读取数据</p>
            <p class="decrible-23">并返回promise对象</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/bdeb28cadfad55d4.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/bdeb28cadfad55d4.jpg" class="image" />
                </a>
            </div>
            <p class="decrible-24">之后我们需要</p>
            <p class="decrible-25">分别依次从多个数据文件里面读取数据</p>
            <p class="decrible-26">再依次拼装到新对象中</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/51f70711a467cf1f.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/51f70711a467cf1f.jpg" class="image" />
                </a>
            </div>
            <p class="decrible-27">有可能数据读取不到</p>
            <p class="decrible-28">需要处理错误</p>
            <p class="decrible-29">继而程序不中断</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/14ceac354e355605.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/14ceac354e355605.jpg" class="image" />
                </a>
            </div>
            <p class="decrible-30">或者是用try..catch处理</p>
            <p class="decrible-31">有时我们希望即使前一个异步操作失败</p>
            <p class="decrible-32">也不要中断后面的异步操作</p>
            <p class="decrible-33">这时可以将第一个await放在try...catch结构里面</p>
            <p class="decrible-34">这样不管这个异步操作是否成功</p>
            <p class="decrible-35">第二个await都会执行</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/ce52061d48abf1ea.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/ce52061d48abf1ea.jpg" class="image" />
                </a>
            </div>
            <span class="image-title">并发异步处理</span>
            <p class="decrible-36">继发关系比较耗时</p>
            <p class="decrible-37">因为只有前一个await完成以后</p>
            <p class="decrible-38">才会执行后一个await</p>
            <p class="decrible-39">完全可以让它们同时触发</p>
            <div class="desc-image">
            	<a href="http://i2.bvimg.com/597584/9e40f191949832c9.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/9e40f191949832c9.jpg" class="image" />
                </a>
            </div>
            <p class="decrible-40">同样有可能数据读取不到</p>
            <p class="decrible-41">需要处理错误</p>
            <p class="decrible-42">继而程序不中断</p>
			<div class="desc-image">
				<a href="http://i2.bvimg.com/597584/85d4fc9a7ba9280f.jpg" class="desc-image-a">
                	<img src="image/loading.gif" data-original="http://i2.bvimg.com/597584/85d4fc9a7ba9280f.jpg" class="image" />
                </a>
            </div>
			<p class="decrible-43">——译自ECMAScript® 2017 Language Specification</p>
        </div>
    </div>
</body>

<script type="text/javascript" src="js/jquery-3.2.1.js"></script>
<!--滚动-->
<script type="text/javascript" src="js/iscroll-probe.js"></script>
<!--懒加载-->
<script type="text/javascript" src="js/lazyLoad.js" ></script>
<!--全屏看图-->
<script type="text/javascript" src="js/klass.min.js" ></script>
<script type="text/javascript" src="js/code.photoswipe.jquery-3.0.5.min.js" ></script>
<script type="text/javascript" src="js/index.js"></script>

</html>